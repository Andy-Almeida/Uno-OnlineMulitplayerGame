<html lang="en">
  <head>
    <title><%= title %></title>
    <script src="/scripts/index.js" defer></script>
    <link rel="stylesheet" href="/stylesheets/lobby.css" />
  </head>
  <body>
    <!-- Project Label -->
    <div id="project-label">CSC-667 Spring 2023 Final Project - Team-X</div>

    <!-- Logo -->
    <div class="logo-container">
      <a href="/">
        <img class="logo" src="/img/logo.png">
      </a>
    </div>
    
    <!-- Nav Bar -->
    <div class="link-button-container">
      <a class="link-button" href="/">Home</a>
      <a class="link-button" href="/authentication/login">Login</a>
      <a class="link-button" href="/authentication/logout">Logout</a>
      <a class="link-button" href="/authentication/register">SignUp</a>
      <a class="link-button" href="/lobby">Lobby</a>
    </div>

    <!-- Lobby Container -->
    <div class = "lobby-container">
      <!-- Lobby Basic Information -->
      <h1 class = "lobby-title">Lobby Page</h1>
      <h3 class = "current-user-name"> User: <%= user.username %> - ID:(<%= user.id %>)</h3>

      <!-- Game Create Button -->
      <form class="create-game-form" method="post" action="/games/create">
        <input type="submit" value="Create Game" />
      </form>

      <!-- Game List-->
      <div id="games-list">
        <h2>Game List</h2>

        <!-- Available Games -->
        <label class="games-label"> Available Games (Not Joined, Not Started) <br></label>
        <% if(availableGames.length > 0) { %>
          <% for(game of availableGames) { %>
            <a class="join-button" href="/games/<%= game.id %>/join">Join <%= game.id %></a>
          <% }%>
        <% } %>
        <% if( availableGames.length < 1 ) { %>
        No Games are Available to Join, instead create one
        <% } %>
        <br><br>

        <!-- Rejoinable Games -->
        <label class="games-label"> Games (Joined, Not Started) <br></label>
        <% if(reJoinGames.length > 0) { %>
          <% for(game of reJoinGames) { %>
            <a class="join-button" href="/games/<%= game.id %>/join">Join <%= game.id %></a>
          <% }%>
        <% } %>
        <% if( reJoinGames.length < 1 ) { %>
        No Games are Available to Join, instead create one
        <% } %>
        <br><br>

        <!-- Running Games -->
        <label class="games-label">Running Games (Joined, Started) <br></label>
        <% if(runningGames.length > 0) { %>
          <% for(game of runningGames) { %>
            <a class="join-button" href="/games/<%= game.id %>/join">Join <%= game.id %></a>
          <% }%>
        <% } %>
        <% if( runningGames.length < 1 ) { %>
        No Games are Available to Join, instead create one
        <% } %>
        <br><br>
      </div> 
      <!-- End of Game List -->
    </div>
    <!-- End of Game List Container-->

    <!-- Chat Area -->
    <div id="chat">
    Chat area
      <!-- Chat Box -->
      <div id="chat-container">
        <div id="messages"></div>
        <label>
          <input id="chatMessage" name="chat-message" placeholder="Message..." />
        </label>
      </div>
    </div>

    <!-- Chat Message -->
    <template id="chat-message-template">
      <div>
        <span class="username"></span>
        <span class="message"></span>
        <span class="timestamp"></span>
      </div>
    </template>

  </body>
</html>